<!-- Simul Bista - N01489966 -->
<!-- promisifying (using fetch) -->
<!DOCTYPE html>
<html lang="en">

<body>
    <table border="1">
        <tbody id="people_table">
            <th>
                <td>ID</td>
                <td>Full Name</td>
                <td>Email</td>
                <td>Gender</td>
                <td>IP Address</td>
            </th>
        </tbody>
    </table>
    <script>

        function stringToNode(html) {
            const template = document.createElement(`template`);
            html = html.trim();
            template.innerHTML = html;
            return template.content.firstChild;
        }

        function displayData(xmlDoc) {
            const listElement = document.getElementById(`people_table`);

            const peopleNodes = xmlDoc.getElementsByTagName(`person`);
            for (let index = 0; index < peopleNodes.length; index++) {
                const peopleNode = peopleNodes[index];
                const rowItem = stringToNode(`<tr>
                    <td></td>  
          <td>${peopleNode.getAttribute(`id`)}</td>
          <td>${
            peopleNode.getElementsByTagName(`first_name`)[0].childNodes[0]
                .nodeValue
            } ${
                peopleNode.getElementsByTagName(`last_name`)[0].childNodes[0]
              .nodeValue
          }</td>
          <td>${peopleNode.getElementsByTagName(`email`)[0].childNodes[0].nodeValue}</td>
          <td>${peopleNode.getElementsByTagName(`gender`)[0].childNodes[0].nodeValue}</td>
          <td>${peopleNode.getElementsByTagName(`ip_address`)[0].childNodes[0].nodeValue}</td>
          </tr>`);
          listElement.appendChild(rowItem);
        }
      }

      fetch("people.xml")
        .then((response) => response.text())
        .then((str) => new DOMParser().parseFromString(str,"text/xml"))
        .then(displayData);
    </script>
</body>

</html>