<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <ol id="people"></ol>
    <script>

        const xhttp=(url,method=`GET`)=>
        new Promise((resolve)=> {
        const xhr=new XMLHttpRequest();
        xhr.onreadystatechange=function(){
            if(this.readyState===4 && this.status===200){
                resolve(this.responseXML);
            }
        };
        xhr.open(method,url);
        xhr.send();
    });

        function stringToNode(html){
            const template=document.createElement('template');
            html=html.trim();
            template.innerHTML=html;
            return template.content.firstChild;
        }

        function displayData(xmlDoc){
            const listElement =document.getElementById('people');
             
            const peopleNodes=xmlDoc.getElementsByTagName('person');

            for(let index=0; index < peopleNodes.length;index++){
                 const personNode =peopleNodes[index];
                 const listItem=stringToNode(`<li> 
                    <h2> ${personNode.getElementsByTagName(`firstname`)[0].childNodes[0].nodeValue}
                     ${personNode.getElementsByTagName(`lastname`)[0].childNodes[0].nodeValue}</h2>
                     <p>${personNode.getElementsByTagName(`email`)[0].childNodes[0].nodeValue}</p>
                     <p>${personNode.getElementsByTagName(`gender`)[0].childNodes[0].nodeValue}</p>
                     <p>${personNode.getElementsByTagName(`ip_address`)[0].childNodes[0].nodeValue}</p>
                      </li> `);
                     listElement.appendChild(listItem);

            }
        }
        //promise
       // xhttp("people.xml").then(displayData); 
    
       //fetch promise
       /*fetch("people.xml")
         .then((data) => data.text())
         .then((data) => {

         const parser = new DOMParser();
         const parsed = parser.parseFromString(data, `text/xml`);

      });*/
      
    //fetch async
       const main=async() =>{
       const data =await fetch("people.xml");
       const stringData=await data.text();
       
        const parser=new DOMParser();
        const parsed=parser.parseFromString(stringData,'text/xml');

        displayData(parsed);
       
       };

       main();
    </script>
</body>
</html>