<!DOCTYPE html>
<html lang="en">
<body>
    <ol id = "people"></ol>
    <script>
       const xhr = (url, method = `GET`) =>
        new Promise((resolve) => 
        {   
            const xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () 
            {
                if (this.readyState == 4 && this.status == 200) {resolve(this.responseXML);
                }};
                xhttp.open(method, url);
                xhttp.send();
                });

        function StringToNode(html){
            const template = document.createElement('template');
            html = html.trim();
            template.innerHTML = html;
            return template.content.firstChild;
        }

   
        function createDetail(data)
        {
            const content = `<li>
            <article>
                <h3>${data.firstname}</h3>
                <h3> ${data.lastname}</h3>
                <p> ${data.id}</p>
                <p> ${data.email }</p>
                <p> ${data.gender }</p>
                <p> ${data.ip_address }</p>
                
                    </article>
                    </li>`;

                    return StringToNode(content);
        }

        function parsedetail(xml)
        {
            const firstname = 
            xml.getElementsByTagName(`firstname`)[0].childNodes[0].nodeValue;
            const lastname = xml.getElementsByTagName(`lastname`)[0].childNodes[0].nodeValue;
            const id = xml.getAttribute(`id`);
            const email = xml.getElementsByTagName(`email`)[0].childNodes[0].nodeValue;
            const gender = xml.getElementsByTagName(`gender`)[0].childNodes[0].nodeValue;
            const ip_address = xml.getElementsByTagName(`ip_address`)[0].childNodes[0].nodeValue;

            return {
                firstname,
                lastname,
                id,
                email,
                gender,
                ip_address,
            };

        }

        function displayData(xmlDoc){
            const people = xmlDoc.getElementsByTagName(`contact`);
            const list = document.getElementById(`people`);

            for(let i = 0; i< people.length; i++)
            {
                const element = people[i];
                const pdata = parsedetail(element);

                const pelement = createDetail(pdata);
                list.appendChild(pelement);
            }
        }

        xhr("people.xml").then(displayData);

    </script>

</body>
</html>