<!DOCTYPE html>
<html lang="en">
    <header>
        <h1>Books catalog</h1>    
    </header>

    <body>
        <ol id="books"></ol>
        <script>
        const xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
            displayData(this);
            }
        };
        xhttp.open("GET", "data_quiz1.xml", true);
        xhttp.send();

        function displayData(xml) {
                const listElement = document.getElementById(`books`);

                const xmlDoc = xml.responseXML;
                const bookNodes = xmlDoc.getElementsByTagName("category");

                for (let index = 0; index < bookNodes.length; index++) {
                const book = bookNodes[index];

                const listItem = document.createElement(`article`);

                const category = document.createElement(`h3`);
                category.appendChild(
                    document.createTextNode(
                    book.getAttribute("name")
                    )
                );
                listItem.appendChild(category);

                const title = document.createElement(`h2`);
                title.appendChild(
                    document.createTextNode(
                    book.getElementsByTagName("title")[0].childNodes[0].nodeValue 
                    )
                );
                listItem.appendChild(title);

                const author = document.createElement(`p`);
                author.appendChild(
                    document.createTextNode(`Authors: ` + 
                    book.getElementsByTagName("author")[0].childNodes[0].nodeValue
                    )
                );
                listItem.appendChild(author);

                const year = document.createElement(`p`);
                year.appendChild(
                    document.createTextNode(
                    `Book was written in ` +
                        book.getElementsByTagName("year")[0].childNodes[0].nodeValue
                    )
                );
                listItem.appendChild(year);

                listItem.appendChild(author);

                    const price = document.createElement(`p`);
                    price.appendChild(
                    document.createTextNode(
                        `Retail price is $` +
                        book.getElementsByTagName("price")[0].childNodes[0].nodeValue
                    )
                    );
                    listItem.appendChild(price);

                listElement.appendChild(listItem);
                }
            }
        </script>
    </body>
</html>

